# simple-calculator
这个项目利用状态机的方式实现简易计算器的功能，可以完成两个状态数和加减乘除四种基本运算

### 工作原理
本项目利用串口助手，通过串口输入等式，利用uart_receive模块负责接收数据，calculator模块负责计算，uart_send模块负责发送数据并将结果显示到串口助手上。三个模块接收同样的时钟信号，保证时钟同步。

一个字符有8个数据位，一个起始位，跟随若干奇偶校验位或是停止位。当uart_receive通过下降沿检测到低电平的起始位后，开始接受8个位信号，当8个位信号（1个ASCII码字符）全部接收完毕后，将接收到的8个位信号（1个ASCII码字符）并行发送给calculator模块，同时发送一个表示数据准备好的高电平信号。随后开始重新检测下一个字符的起始位，重复之前的步骤。
当接受到数据准备好的高电平信号后，calculator模块将接收到的每一个ASCII码字符逐一转换成为操作数和操作符，当接受到符号‘=’后，结束接收，开始计算，并将计算结果转换成ASCII码，存入特定的数组，再从数组中读取对应的ASCII码，在uart_send不忙的情况下将计算结果以ASCII码的方式一位一位传送给uart_send模块，并发送一个发送数据准备好的高电平，当发送完毕后回到起始状态，重新开始检测。

uart_send模块每接收到一个ASCII码信号和发送数据准备好的高电平后，都在8个数据位前添加一个低电平的起始位，在8个数据位后添加一个高电平的停止位，并且通过串口助手从起始位开始一位一位的发送出去数据位，直到发送至停止位后再重新接收来自calculator模块的数据

